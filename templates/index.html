{% load static %}

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApTimer</title>

    <!-- Jquery -->
    <script src="{% static 'js/utils/jquery-3.5.1.min.js' %}"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <script src="{% static 'js/utils/bootstrap.min.js' %}"></script>

    <!-- Plotly -->
    <script src="{% static 'js/utils/plotly-latest.min.js' %}"></script>

    <script src="{% static 'js/index.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
</head>

<body>
    <header class="container-fluid row justify-content-center mb-3">
        <h1>ApTimer: a calculator of the timescale of F-Cl-OH diffusion in apatite</h1>
    </header>

    <div class="container cal-wrapper">

        <div class="instruction my-3 p-3">
            <h3>Instruction:</h3>
            <p>This calculator is developed for estimating the timescale of multicomponent (F-Cl- OH) diffusion in
                apatite, based on
                the observation and analysis of compositional variation in F/Cl/OH in the natural apatite.<br>
                The calculated diffusion times can be related to the corresponding magmatic processes, such as the
                pre-eruptive magma
                ascent.<br>
                Detailed computation methods and applications can be found in the paper below:</p>
            <p><i>Li, W., Chakraborty, S., Nagashima, K., Costa, F. Multicomponent diffusion of F, Cl and OH in apatite
                    with application to
                    magma ascent rates. EPSL (in review)</i></p>
        </div>

        <div class="input my-3 p-3">
            <h3>Input:</h3>

            <p>
                <b>Determined compositional profiles: </b>
                <span>Please use the provided <a href="">data template</a> (.csv) to organise your data, and upload them
                    using the green button below.</span>
            </p>
            <form class="upload">
                <div class="custom-file">
                    <input type="file" class="custom-file-input" id="upload-file">
                    <label class="custom-file-label" for="customFile">Choose file</label>
                </div>
                <button class="btn button-upload" type="button">Upload & Plot</button>
            </form>

            <div id="plot"></div>

            <div class="row">
                <div class="col position-relative">
                    <form class="diffusivity-cal" method="GET">
                        <p><b>Parameter use for diffusion modelling:</b></p>

                        <table class="table table-borderless table-sm col-lg-11">
                            <tr>
                                <td>Temperature:</td>
                                <td><input type="text" value="900" id="temp"></td>
                            </tr>
                            <tr>
                                <td>Angle between traverse and the c- axis of apatite:</td>
                                <td><input type="text" value="17" id="tilt"></td>
                            </tr>
                        </table>
                    </form>
                    <div class="calculation-result"></div>
                    <button class="btn button-cal" type="button">Calculate</button>
                </div>

                <div class="col position-relative">
                    <form action="" class="inibound">
                        <p><b>Initial & boundary conditions:</b></p>
                        <table class="table table-borderless table-sm">
                            <thead>
                                <td scope="col"></td>
                                <td scope="col">Initial conditions</td>
                                <td scope="col">Left boundary</td>
                                <td scope="col">Right boundary</td>
                            </thead>
                            <tbody>
                                <tr>
                                    <td scope="row">X<sub>Cl</sub></td>
                                    <td><input type="text" id="xcl_ini" value="0.14"></td>
                                    <td><input type="text" id="xcl_left" value="0.22"></td>
                                    <td><input type="text" id="xcl_right" value="0.14"></td>
                                </tr>
                                <tr>
                                    <td scope="row">X<sub>F</sub></td>
                                    <td><input type="text" id="xf_ini" value="0.69"></td>
                                    <td><input type="text" id="xf_left" value="0.78"></td>
                                    <td><input type="text" id="xf_right" value="0.69"></td>
                                </tr>
                                <tr>
                                    <td scope="row">X<sub>OH</sub></td>
                                    <td><input type="text" id="xoh_ini" value="0.17"></td>
                                    <td><input type="text" id="xoh_left" value="0.0"></td>
                                    <td><input type="text" id="xoh_right" value="0.17"></td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                    <div id="spacer" style="width: 200px; height: 100px; float:left; display:inline-block"></div>
                    <button class="btn button-inibound" type="button">Plot</button>
                </div>
            </div>

            <hr style="border-top: 1px dashed">

            <p><b>Distance & time steps:</b></p>
            <form action="" class="distime">
                <div class="col-lg-4 col-md-8 p-0">
                    <table class="table table-borderless table-sm">
                        <tbody>
                            <tr>
                                <td>Distance step, dx:</td>
                                <td><input type="text" value="1" id="dx"> Âµm</td>
                            </tr>
                            <tr>
                                <td>Time step, dt:</td>
                                <td><input type="text" value="1" id="dt"> hours</td>
                            </tr>
                            <tr>
                                <td>Iteration:</td>
                                <td><input type="text" value="230" id="iteration"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <button class="btn button-distime mt-3" type="button">Run</button>
            </form>
        </div>

        <div class="model-result my-3 p-3">
            <h3>Model fits:</h3>
        </div>

    </div>
</body>

<script>
    // Add the following code if you want the name of the file appear on select
    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>

</html>